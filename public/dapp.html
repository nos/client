<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
  </head>

  <body>
    <h1>DApp Example</h1>
    <p>
      Click the buttons below to show info related to the currently authenticated NEO address.
    </p>

    <h2>getAddress</h2>
    <div>
      <button type="button" onClick="javascript:getAddress()">Get Address</button>
    </div>

    <h2>getBalance</h2>
    <div>
      <button type="button" onClick="javascript:getBalance(NEO)">Get NEO Balance</button>
      <button type="button" onClick="javascript:getBalance(GAS)">Get GAS Balance</button>
      <button type="button" onClick="javascript:getBalance(RPX)">Get RPX Balance</button>
      <button type="button" onClick="javascript:getBalance('fake')">Get Balance Error</button>
    </div>

    <h2>testInvoke</h2>
    <div>
      <button type="button" onClick="javascript:testInvoke()">Execute test invoke</button>
    </div>

    <h2>invoke</h2>
    <div>
      <button type="button" onClick="javascript:invoke()">Real invocation (Confirmation)</button>
    </div>

    <h2>getStorage</h2>
    <div>
      <button type="button" onClick="javascript:getStorage()">Get From Storage</button>
    </div>


    <h2>send</h2>
    <div>
      <button type="button" onClick="javascript:send()">Send 1 GAS</button>
    </div>

    <h2>claimGas</h2>
    <div>
      <button type="button" onClick="javascript:claimGas()">Claim GAS</button>
    </div>


    <script type="text/javascript">
      const nos = window.NOS.V1;

      const NEO = 'c56f33fc6ecfcd0c225c4ab356fee59390af8560be0e930faebe74a6daff7c9b';
      const GAS = '602c79718b16e442de58778e148d0b1084e3b2dffd5de6b7b16cee7969282de7';
      const RPX = 'ecc6b20d3ccac1ee9ef109af5a7cdb85706b1df9';

      const scriptHash = '2f228c37687d474d0a65d7d82d4ebf8a24a3fcbc';
      const operation = '9937f74e-1edc-40ae-96ad-1120166eab1b';
      const arg1 = 'ef68bcda-2892-491a-a7e6-9c4cb1a11732';

      function getAddress() {
        nos.getAddress()
          .then((address) => alert(`Address: ${address}`))
          .catch((err) => alert(`Error: ${err.message}`));
      }

      function getBalance(scriptHash) {
        nos.getBalance(scriptHash)
          .then((balance) => alert(`Balance: ${balance}`))
          .catch((err) => alert(`Error: ${err.message}`));
      }

      function invoke() {
        nos.invoke(scriptHash, operation, arg1)
          .then((txid) => alert(`Invoke txid: ${txid} `))
          .catch((err) => alert(`Error: ${err.message}`));
      }

      function testInvoke() {
        nos.testInvoke(scriptHash, operation, arg1)
          .then((script) => alert(`Test invoke script: ${script} `))
          .catch((err) => alert(`Error: ${err.message}`));
      }

      function getStorage() {
        const gSData = { scriptHash: "85e9cc1f18fcebf9eb8211a128807e38d094542a", key: "post.latest" };
        nos.getStorage(gSData.scriptHash, gSData.key)
          .then((data) => alert(`Get storage data: ${data} `))
          .catch((err) => alert(`Error: ${err.message}`));
      }

      function send() {
        const asset = GAS;
        const amount = "1";
        const receiver = 'AHTU1e6Q15rF8HShE1KdW4S5ZJ3Ah8HJPu';

        nos.send(asset, amount, receiver)
          .then((data) => alert(`${amount} ${asset} sent: ${data} `))
          .catch((err) => alert(`Error: ${err.message}`));
      }

      function claimGas() {
        nos.claimGas()
          .then((data) => alert(`Gas claimed ${data}`))
          .catch((err) => alert(`Error: ${err.message}`));
      }
    </script>
  </body>
</html>
